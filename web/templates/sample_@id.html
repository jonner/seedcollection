{% extends "root.html" %}
{% from "_macros.html" import show_germination_list, show_vernacular_list, icon, breadcrumbs %}
{% block title %}Sample S{{ sample.id | idfmt }}{% endblock %}
{% block content %}
{{ breadcrumbs([
{"name": "Home", "link": ("/" | app_url) },
{"name": "Samples", "link": ("/sample/list" | app_url) },
{"name": sample.id | idfmt("S"), "active": true }]) }}

<h2>
    <a href="{{ ("/taxonomy/" ~ sample.taxon.id) | app_url }}">{{ sample.taxon.complete_name }}</a>
    <a href="{{ ("/sample/" ~ sample.id ~ "/edit") | app_url }}">{{ icon("pencil") }}</a>
</h2>
<h5>Common Names</h5>
<div class="mb-3 px-2">
    {% if sample.taxon.vernaculars %}
    {{ show_vernacular_list(sample.taxon.vernaculars) }}
    {% else %}
    None
    {% endif %}
</div>
<h5>Source</h5>
<div class="mb-3 px-2"><a href="{{ ( "/source/" ~ sample.source.id) | app_url }}">{{ sample.source.name }}</a></div>
<h5>Collection Date</h5>
<div class="mb-3 px-2">{% if sample.month %}{{ sample.month }}/{% endif %}{{ sample.year }}</div>
<h5>Quantity</h5>
<div class="mb-3 px-2">
    {% if sample.quantity is none %}
    Unknown
    {% elif sample.quantity == 0 %}
    <div class="text-danger">0</div>
    {% else %}
    {{sample.quantity }}
    {% endif %}
</div>
<h5>Certainty</h5>
<div class="mb-3 px-2">
    <span
        {% if sample.certainty == "Certain" %}class="success"{% elif sample.certainty == "Uncertain" %}class="warning"{% endif %}>
        {{ sample.certainty or "Not specified" }}
    </span>
</div>
<h5>Germination Info</h5>
<div class="mb-3 px-2">
    {% if sample.taxon.germination %}
    {{ show_germination_list(sample.taxon.germination) }}
    {% else %}
    <div>No Data</div>
    {% endif %}
</div>
<h5>Notes</h5>
<div class="mb-3 px-2">{{ sample.notes }}</div>
<h5>Allocations</h5>
<ul>
    {% for a in allocations %}
    <li><a href="{{ ("/collection/" ~ a.collection.id ~ "/sample/" ~ a.id) | app_url }}">{{ a.collection.name }}</a>
    </li>
    {% else %}
    <li>None</li>
    {% endfor %}
</ul>
{% endblock %}
