{% extends "root.html" %}
{% block title %}Collection {{ collection.id }}{% endblock %}
{% block content %}
<h2>Collection Details</h2>
<form class="row mb-4" hx-put="{{ ("/collection/" ~ collection.id) | api_url }}" hx-swap="none">
    <div class="row mb-3">
    <label for="CollectionIdInput" class="form-label">ID</label>
    <input type="text" class="form-control" id="CollectionIdInput" value="{{ collection.id }}" disabled readonly>
    </div>
    <div class="row mb-3">
    <label for="CollectionNameInput" class="col-form-label">Name</label>
    <input type="text"  class="form-control" id="CollectionNameInput" name="name" value="{{ collection.name }}">
    </div>
    <div class="row mb-3">
    <label for="CollectionDescInput" class="col-form-label">Description</label>
    <textarea id="CollectionDescInput" class="form-control" name="description">{{ collection.description }}</textarea>
    </div>
    <div class="row mb-3">
    <button type="submit" class="btn btn-primary">Update</button>
    </div>
</form>
<h3>Samples in this collection <a href="{{ ("/collection/" ~ collection.id) | app_url }}/add">+</a></h3>
{% if collection.samples %}
<table class="table">
    <thead>
    <tr>
        <th>ID</th>
        <th>Taxon</th>
        <th>Location</th>
        <th></th>
    </tr>
    </thead>
    <tbody>
    {% for s in collection.samples %}
    <tr>
        <td><a href="{{ ("/sample/" ~ s.id) | app_url }}">{{ s.id }}</a></td>
        <td>{{ s.taxon.complete_name }}</td>
        <td>{{ s.location.name }}</td>
        <td><button type="submit" class="btn btn-outline-danger"
                hx-delete="{{ ("/collection/" ~ collection.id ~ "/sample/" ~ s.id) | api_url }}"
                hx-confirm="Are you sure you want to remove sample {{ s.id }}?"
                hx-target="closest tr"
                hx-swap="outerHTML">Remove</button></td>
    </tr>
    {% endfor %}
    </tbody>
</table>
{% else %}
<p>No samples found</p>
{% endif %}
{% endblock %}
